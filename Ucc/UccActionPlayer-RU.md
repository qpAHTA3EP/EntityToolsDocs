# **Алгоритм обработки UCC-профиля**

После вступления персонажа в бой и активации подсистемы [**Universal Combat Class**](https://www.neverwinter-bot.com/forums/viewtopic.php?f=150&t=8020) (Далее - *UCC*), бот перебирает набор [*ucc-команд*](EntityTools-UccExtensions-RU.md#ref-Actions) сначала (сверху) до конца (вниз), и активирует их, если выполняются соответсвующие им условия. Перебор [*ucc-команд*](EntityTools-UccExtensions-RU.md#ref-Actions) повторяется до тех пор, пока персонаж находится в бою. Это называется **БОЕВОЙ ЦИКЛ**.  

Откаты, дальность умения, наличие очков действия (ОД для Ежедневок) учитывается ботом самостоятельно и вносить их в список условий не нужно.

Перед попыткой активации [*ucc-команды*](EntityTools-UccExtensions-RU.md#ref-Actions) проверяются:

- **внешние** [*ucc-улословия*](EntityTools-UccExtensions-RU.md#ref-Condtions), добавленные к [*ucc-команде*](EntityTools-UccExtensions-RU.md#ref-Actions) вручную через специальный интерфейс;  
- **внутренние** условия, "встроенные" в [*ucc-команду*](EntityTools-UccExtensions-RU.md#ref-Actions). К ней относятся наличиет ОД, расстояние до цели, откаты и т.п.

Если вышеуказанные условия выполняются, то [*ucc-команда*](EntityTools-UccExtensions-RU.md#ref-Actions) активируется, а бот начинает обработку списка с 1 команды, то есть **БОЕВОЙ ЦИКЛ** начинается с начала.
В противном случае [*ucc-команда*](EntityTools-UccExtensions-RU.md#ref-Actions) пропускается и бот анализирует следующую.

Команды активации умений, не изученных у данного персонажа, помечаются в редакторе словами "Unknown spell" и в бою пропускаются.  
Команды активации умений неэкипированных умений (без префикса [Slotted]) также пропускаются.

При выполнении команды [***UCCActionPack***](Actions/UCCActionPack-RU.md) для всех вложенных [*ucc-команд*](EntityTools-UccExtensions-RU.md#ref-Actions) проверяются связанные с ними условия и производится попытка их активации.  
По умолчанию обработка последовательности вложенных команд не прерывается в результате успешной активации предыдущей *ucc-команды* как в обычном порядке, то есть **БОЕВОЙ ЦИКЛ** не прерывается и не начинается сначала.

Таким образом, самые важные [*ucc-команды*](EntityTools-UccExtensions-RU.md#ref-Actions) **НЕОБХОДИМО** поместить в начале (сверху) набора (Ежедневные умения, Уклонения и умения защиты).  
[*UCC-команды*](EntityTools-UccExtensions-RU.md#ref-Actions) не требующие соблюдения каких-либо условий (свободные умения) нужно размещать в конце набора, в противном случае персонаж зациклится на такой [*ucc-команде*](EntityTools-UccExtensions-RU.md#ref-Actions) и следующие за ней никогда не будут применяться.

---

Пример обработки ucc-профиля боевой подсистемой бота приведен [*в отдельной статье*](UccActionPlayerExample-RU.md).

---

<p align="center"><img src="diagrams/UccAlgorithm-RU.svg"></p>

---

<a href="javascript:history.back()">Назад</a>  
[Назад к содержанию](../index.md)
